# Домашнее задание к занятию "11.02 Микросервисы: принципы"  
  
Вы работаете в крупной компанию, которая строит систему на основе микросервисной архитектуры.  
Вам как DevOps специалисту необходимо выдвинуть предложение по организации инфраструктуры, для разработки и эксплуатации.  
  
## Задача 1: API Gateway   
  
Предложите решение для обеспечения реализации API Gateway. Составьте сравнительную таблицу возможностей различных программных решений. На основе таблицы сделайте выбор решения.  
  
Решение должно соответствовать следующим требованиям:  
- Маршрутизация запросов к нужному сервису на основе конфигурации  
- Возможность проверки аутентификационной информации в запросах  
- Обеспечение терминации HTTPS 
  
Обоснуйте свой выбор.  
  
#### <b>Ответ:</b>  
---

|   |Azure|Amazon|Yandex|Nginx|Haproxy|Kong|Apache APISIX|Tyk|Goku|Gloo|Istio|MuleSoft|Apigee|
|---|-----|------|------|-----|-------|----|-------------|---|----|----|-----|--------|------|
|Маршрутизация| + | + | + | + | + | + | + | + | + | + | + | + | + |
|Аутентификация| + | + | + | + | + | + | + | + | + | + | + | + | + |
|Терминация HTTPS| + | + | + | + | + | + | + | + | + | + | + | + | + |
  
Выбор будет зависеть от инфраструктуры и поставленных задач. 
  
Облачные API Gateway удобны в использовании и значительно экономят время разработки, поддерживают интеграцию с облачными сервисами и настраиваются очень быстро. Apigee и MuleSoft — одни из лучших инструментов управления API. Решение с открытым исходным кодом - Kong, его базовый бесплатный функционал также удовлетворяет требованиям задачи.  
  
## Задача 2: Брокер сообщений  
  
Составьте таблицу возможностей различных брокеров сообщений. На основе таблицы сделайте обоснованный выбор решения.   
  
Решение должно соответствовать следующим требованиям:  
- Поддержка кластеризации для обеспечения надежности  
- Хранение сообщений на диске в процессе доставки  
- Высокая скорость работы  
- Поддержка различных форматов сообщений  
- Разделение прав доступа к различным потокам сообщений  
- Протота эксплуатации  

#### <b>Ответ:</b>  
  
|   |Кластеризация|Хранение|Скорость|Форматы|Права|Простота|
|---|-------------|--------|--------|-------|-----|--------|
|RabbitMQ| + | + | + | + | + | - |
|Apache Kafka| + | - | + | + | + | - |
|AWS SQS/SNS| + | + | + | + | + | + |
|Redis| + | + | ++ | + | + | + |
|Qpid| + |	+ |	- | + |	+ | - |
|SwiftMQ| + | + | - | + | + | - |
|Artemis| + | + | - | + | + | + |
|Apollo| - | + | - | + | + | + |
Выбирая нужный брокер, следует исходить из понимания системы и её потребностей:  
  
- RabbitMQ - если нужно построение сложных сценариев маршрутизации  
  
- Apache Kafka - работает с большими потоками данных, обеспечивает сохранность сообщений и возможность многократной повторной обработки  
  
- AWS SQS/SNS - минимальные накладные расходы и быстрая настройка, подойдет для стартапов  
  
---


# Домашнее задание к занятию "Введение в микросервисы"

## Задача 1: Интернет Магазин

Руководство крупного интернет магазина у которого постоянно растёт пользовательская база и количество заказов рассматривает возможность переделки своей внутренней ИТ системы на основе микросервисов. 

Вас пригласили в качестве консультанта для оценки целесообразности перехода на микросервисную архитектуру. 

Опишите какие выгоды может получить компания от перехода на микросервисную архитектуру и какие проблемы необходимо будет решить в первую очередь.

---
Ответ
---

Выгоды от перехода на микросервисы:

 - Гибкость с точки зрения горизонтального масштабирования, то есть возможность масштабировать только те сервисы, которые этого требуют. Когда нагрузка снизится, можно сократить лишние ресурсы.
 - Проще вводить новый функционал сервисов без остановки всей системы, а также переисывать систему по частям, внедряя новые технологии для оптимизации и ускорения работы сервича в целом.
 - Отсутствие единой точки отказа, увеличивается отказоустойчивость системы.
 - Отдельно взятый микросервис проще разрабатывать и следить за жизненным циклом, то есть обновлять, дорабатывать, тестировать и т.д.
 - Подбор персонала становится проще, так как под каждый микросервис можно набрать свою команду узкопрофильных специалистов. По этой же причине, проще управлять жизненным циклом продукта в целом.

Проблемы, требующие решения:
 - Не рекомендуется внедрять микросервисы, если проект только на стадии проработки.
 - При проработке решения должно быть учтено огромное количество архитектурных вопросов, которые бывает сложно спрогнозировать.
 - Большим количеством микросервисов сложно управлять.
 - Микросервисы потребуют изменения подходов к инфраструктуре
 - Требуеются узкопрофильные специалисты с глубоким погружением в тему.
 - Необходимо решать вопросы автоматизации сборки и тестирования, поддержки документации в актальном состоянии на каждый микросервис, совместимости API. 

 ---
