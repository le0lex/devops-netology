5.1. Введение в виртуализацию. Типы и функции гипервизоров. Обзор рынка вендоров и областей применения.

Задача 1
Опишите кратко, как вы поняли: в чем основное отличие полной (аппаратной) виртуализации, паравиртуализации и виртуализации на основе ОС.

Ответ:

Паравиртуализация - ядро гостевой ОС модифицируется для работы с гипервизором. Гостевой ОС известно, что она гостевая система и есть хостовая ОС, куда передаются соответствующие команды. То есть Каждой виртуальной машине выделяется ровно столько ресурсов, сколько определено гипервизором, который является неким посредником между аппаратной частью и гостевой ОС.

Аппаратная виртуализация - гипервизор сам является по сути операционной системой, то есть дополнительно хостовая ОС не требуется. Это полная виртуализация. Гостевая ОС передает напрямую аппаратной части инструкции, которые должны поддерживаться этой аппаратной чстью. 

Виртуализация на основе ОС - гостевая ОС не знает, что она находится в виртуальной среде. Аппаратное обеспечение виртуализируется хостовой ОС, то есть аппаратное обеспечение имитируется. Такой тип виртуализации использует контейнеры. Их суть в том, что несклько контейнеров используют ресурсы одной и той же хостовой ОС, при этом ресурсы изолированы для каждого контейнера.



Задача 2
Выберите один из вариантов использования организации физических серверов, в зависимости от условий использования.

Организация серверов:

физические сервера,
паравиртуализация,
виртуализация уровня ОС.
Условия использования:

Высоконагруженная база данных, чувствительная к отказу.
Различные web-приложения.
Windows системы для использования бухгалтерским отделом.
Системы, выполняющие высокопроизводительные расчеты на GPU.
Опишите, почему вы выбрали к каждому целевому использованию такую организацию.

Ответ:
физические сервера - Системы, выполняющие высокопроизводительные расчеты на GPU, высоконагруженная база данных, чувствительная к отказу. Так как у приложений есть прямой доступ к аппаратным ресурсам, на виртуализацию ресурсы не тратятся. Кроме того отсутствуют дополительные точки отказа в виде гипервизора. Более отказоустойчивым решением тут будет использование полной аппаратной виртуализации и объединение серверов в кластер.

паравиртуализация - Windows системы для использования бухгалтерским отделом. Если используется гипервизор от Microsoft, то особенно актуально. В данном случае присутствует гибкость с точки зрения масштабирования, ресурсы для каждой VM определяются заранее, удобно администрировать парк виртуальных машин, которые изолированы друг от друга.  

виртуализация уровня ОС. - Различные web-приложения. Контейнеры дают гибкость при масштабировании и высокий уровень отказоустойчивости. Предполагается, что web приложения требуют меньше ресурсов, чем, например, высокопроизводительные рассчеты на GPU. Также использование контейнеров удобнее с точки зрения администрирования.



Задача 3
Выберите подходящую систему управления виртуализацией для предложенного сценария. Детально опишите ваш выбор.

Сценарии:

100 виртуальных машин на базе Linux и Windows, общие задачи, нет особых требований. Преимущественно Windows based инфраструктура, требуется реализация программных балансировщиков нагрузки, репликации данных и автоматизированного механизма создания резервных копий.
Для такого сценария, на мой взгляд, лучше всего подходит решение от VmWare vSphere, так как данное решение обладает богатым функционалом с точки зрения резервирования и балансировки нагрузки. 

Требуется наиболее производительное бесплатное open source решение для виртуализации небольшой (20-30 серверов) инфраструктуры на базе Linux и Windows виртуальных машин.
KVM - open source решение, поддерживает и Linux и Windows, хорошая производительность.

Необходимо бесплатное, максимально совместимое и производительное решение для виртуализации Windows инфраструктуры.
Hyper-V - является бесплатным гипервизором от Microsoft, также встроен в некоторые ОС от Microsoft, поэтому для сценария с использованием Windows машин подходит лучше всего.

Необходимо рабочее окружение для тестирования программного продукта на нескольких дистрибутивах Linux.
Xen - поддерживает разные дистрибутивы linux. Позволяет создавать шаблоны и быстро запускать виртуальные машины linux. Xen обладает хорошей стабильностью и производительностью.

Задача 4
Опишите возможные проблемы и недостатки гетерогенной среды виртуализации (использования нескольких систем управления виртуализацией одновременно) и что необходимо сделать для минимизации этих рисков и проблем. Если бы у вас был выбор, то создавали бы вы гетерогенную среду или нет? Мотивируйте ваш ответ примерами.

Гетерогенная среда виртуализации предполагает повышенные требования к компетенции инженеров, более сложное обслуживание, проблемы с автоматизацией, риски связанные с совместимостью и, поскольку отсутствует общий стандарт, низкая эффективность. Гетерогенная среда виртуализации должна использоваться в исключительнах случаях, например, когда есть привязка к определенному вендору для определенного сервиса. Также минусом гетерогенной виртуализации является более дорогая техническая поддержка.

Минимизацией рисков при ипользовании гетерогенной среды виртуализации является грамотное планирование и проектирование. Необходимо понимать в какую сторону раззвивается инфраструктура, чтобы не загнать себя в угол и оказаться в сложной ситуации из-за несовместимости продуктов или сервисов. Правильнее, на мой взгляд, как минимум разделять среды виртуализации  и сервисы на низх по какому-либо принципу, чтобы они не интегрировались между собой в значительной степени.

Плюс гетерогенной среды виртуализации может быть в отвязке от какого-то одного вендора, а также в увеличении производительности для определенных сервисов оптимизированных под определенную среду виртуализации. Например, VmWare может не поддерживать некоторые виды аппаратного обеспечения, поэтому вместе с VmWare можно использовать альтернативную среду виртуализации. Другой пример, когда есть парк VM под Windows и под Lunux, то можно использовать hyper-v для Windows систем, а для linux Xen или KVM, если это дает ощутимый прирост производительности и функцональности и упрощает администрирование.

Я бы не стал использовать гетерогенную среду виртуализации без особой необходимости.




